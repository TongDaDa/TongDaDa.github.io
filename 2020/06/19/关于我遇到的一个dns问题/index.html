<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于遇到的一个DNS查询问题 | Oliver Liu</title>
    <meta name="description" content="关于遇到的一个DNS查询问题">
    
    <meta name="title" content="关于遇到的一个DNS查询问题"><meta name="keywords" content="关于遇到的一个DNS查询问题"><meta name="author" content="Oliver Liu"><meta name="language" content="Chinese"><meta property="article:published_time" content="2020-06-19T00:00:00.000Z"><meta property="og:site_name" content="Oliver Liu"><meta property="og:title" content="关于遇到的一个DNS查询问题"><meta property="og:type" content="website"><meta property="og:url" content="/_posts/netwrok/%E5%85%B3%E4%BA%8E%E6%88%91%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%B8%AADNS%E9%97%AE%E9%A2%98.html"><meta property="og:image" content="https://cdn.pixabay.com/photo/2015/01/20/13/13/ipad-605440_960_720.jpg"><meta name="twitter:title" content="关于遇到的一个DNS查询问题"><meta name="twitter:url" content="/_posts/netwrok/%E5%85%B3%E4%BA%8E%E6%88%91%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%B8%AADNS%E9%97%AE%E9%A2%98.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.pixabay.com/photo/2015/01/20/13/13/ipad-605440_960_720.jpg"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="network"><meta property="article:tag" content="network">
    <link rel="preload" href="/assets/css/0.styles.02659a58.css" as="style"><link rel="preload" href="/assets/js/app.0c8f8685.js" as="script"><link rel="preload" href="/assets/js/4.a235b7fe.js" as="script"><link rel="preload" href="/assets/js/7.428d303c.js" as="script"><link rel="preload" href="/assets/js/9.d8389ee9.js" as="script"><link rel="prefetch" href="/assets/js/10.936a6e7f.js"><link rel="prefetch" href="/assets/js/11.8b709559.js"><link rel="prefetch" href="/assets/js/12.543f279e.js"><link rel="prefetch" href="/assets/js/13.75b83282.js"><link rel="prefetch" href="/assets/js/14.436508fe.js"><link rel="prefetch" href="/assets/js/15.b424d823.js"><link rel="prefetch" href="/assets/js/16.ebf6e7f4.js"><link rel="prefetch" href="/assets/js/17.4db4931f.js"><link rel="prefetch" href="/assets/js/18.c07a6a94.js"><link rel="prefetch" href="/assets/js/19.71f16bd9.js"><link rel="prefetch" href="/assets/js/20.fcb589bd.js"><link rel="prefetch" href="/assets/js/21.6bb70d83.js"><link rel="prefetch" href="/assets/js/22.f732e817.js"><link rel="prefetch" href="/assets/js/23.3ca71b2f.js"><link rel="prefetch" href="/assets/js/24.50025969.js"><link rel="prefetch" href="/assets/js/25.d62671cf.js"><link rel="prefetch" href="/assets/js/26.e6d68e27.js"><link rel="prefetch" href="/assets/js/27.3126209f.js"><link rel="prefetch" href="/assets/js/28.0755006f.js"><link rel="prefetch" href="/assets/js/29.d70e254c.js"><link rel="prefetch" href="/assets/js/3.d3c7e651.js"><link rel="prefetch" href="/assets/js/30.34bc2990.js"><link rel="prefetch" href="/assets/js/31.72037587.js"><link rel="prefetch" href="/assets/js/32.af2633ba.js"><link rel="prefetch" href="/assets/js/33.d0351167.js"><link rel="prefetch" href="/assets/js/34.10711d95.js"><link rel="prefetch" href="/assets/js/35.c97ea67c.js"><link rel="prefetch" href="/assets/js/36.f9c672a7.js"><link rel="prefetch" href="/assets/js/37.1c436034.js"><link rel="prefetch" href="/assets/js/38.7bae7925.js"><link rel="prefetch" href="/assets/js/39.ea9225ba.js"><link rel="prefetch" href="/assets/js/40.7e2eb7ec.js"><link rel="prefetch" href="/assets/js/41.b167a870.js"><link rel="prefetch" href="/assets/js/42.732fcd5c.js"><link rel="prefetch" href="/assets/js/43.dacf7aa9.js"><link rel="prefetch" href="/assets/js/44.7db9bf0a.js"><link rel="prefetch" href="/assets/js/45.9c7ac18c.js"><link rel="prefetch" href="/assets/js/46.6478f356.js"><link rel="prefetch" href="/assets/js/47.7b8e1c10.js"><link rel="prefetch" href="/assets/js/48.af1e6f75.js"><link rel="prefetch" href="/assets/js/49.28c0ed74.js"><link rel="prefetch" href="/assets/js/5.aecbe8c7.js"><link rel="prefetch" href="/assets/js/50.22547c78.js"><link rel="prefetch" href="/assets/js/51.40083d40.js"><link rel="prefetch" href="/assets/js/52.d2383973.js"><link rel="prefetch" href="/assets/js/53.1ecfc54c.js"><link rel="prefetch" href="/assets/js/54.6eda4c5c.js"><link rel="prefetch" href="/assets/js/55.df969ebc.js"><link rel="prefetch" href="/assets/js/56.0a8e4816.js"><link rel="prefetch" href="/assets/js/57.74b4fd07.js"><link rel="prefetch" href="/assets/js/58.bd1abf5e.js"><link rel="prefetch" href="/assets/js/59.766c30cb.js"><link rel="prefetch" href="/assets/js/6.6a06c243.js"><link rel="prefetch" href="/assets/js/60.fea66db7.js"><link rel="prefetch" href="/assets/js/61.0f39c5aa.js"><link rel="prefetch" href="/assets/js/62.e4c70e99.js"><link rel="prefetch" href="/assets/js/63.8014070e.js"><link rel="prefetch" href="/assets/js/64.cc116722.js"><link rel="prefetch" href="/assets/js/65.66cc4da9.js"><link rel="prefetch" href="/assets/js/66.b5494424.js"><link rel="prefetch" href="/assets/js/67.9a34c172.js"><link rel="prefetch" href="/assets/js/68.99b6da8f.js"><link rel="prefetch" href="/assets/js/8.b4167051.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.386b0d3a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.02659a58.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><section data-v-7213d69c><header id="header" class="shadow" data-v-7213d69c><div class="p-3 d-flex justify-content-between"><div class="self-title"><a href="/" class="text-decoration-none h4 router-link-active">
        Oliver Liu
      </a> <span class="self-flag">
        一个充满理想并付诸于行动中的码农小白，喜欢遨游在计算机世界里，励志于成为一名赚很多钱的程序员
      </span></div> <div class="search-wrapper u-px3 d-flex align-items-center"><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-7004" class="el-autocomplete"><div class="el-input el-input--small"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="components-search" placeholder="Search" fetchSuggestions="function () { [native code] }" debounce="200" placement="bottom-end" popperAppendToBody="true" class="el-input__inner"><!----><!----><!----><!----></div><div role="region" class="el-autocomplete-suggestion el-popper components-search" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div></div> <nav class="px-5"><ul role="menubar" class="d-flex justify-content-center border-0 el-menu--horizontal el-menu" style="background-color:;"><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><a href="/" class="text-decoration-none d-block h-100 w-100 router-link-active"><i class="el-icon-house"></i>
          Home
        </a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><a href="/projects/" class="text-decoration-none d-block h-100 w-100"><i class="el-icon-folder"></i>
          Projects
        </a></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:;border-bottom-color:transparent;background-color:;"><a href="/about_me/" class="text-decoration-none d-block h-100 w-100"><i class="el-icon-user"></i>
          About me
        </a></li></ul></nav></header> <div id="vuperess-theme-blog__post-layout" data-v-7213d69c><main class="vuepress-blog-theme-content"><div class="el-card mb-4 is-always-shadow"><!----><div class="el-card__body" style="padding:0;"><img src="https://cdn.pixabay.com/photo/2015/01/20/13/13/ipad-605440_960_720.jpg" alt="关于遇到的一个DNS查询问题" class="w-100"> <div class="p-3"><h1 align="center">关于遇到的一个DNS查询问题</h1> <div class="ui-post-info d-flex text-secondary d-flex justify-content-center my-3"><div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
    Fri Jun 19 2020
  </div> <div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
    2 min read
  </div> <div class="post-info-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg>
    Beijing;
  </div></div></div></div></div> <div class="el-card is-always-shadow"><!----><div class="el-card__body" style="padding:1rem 2rem;"><div class="content__default"><h2 id="本地-local-resolver"><a href="#本地-local-resolver" class="header-anchor">#</a> 本地(Local Resolver)</h2> <p>DNS对于大多数同学来说都可能知道是干嘛的，但是深入了解工作原理可能有些模糊，首先它它分布在很多个阶段，整体分为两大块：本地DNS服务，远端DNS服务。</p> <p>每台电脑本地都会配置一个DNS解析文件，在Nginx上我们可以在 <code>/etc/resolv.conf</code> 中查看，当然也可以从界面中查看。</p> <p>下面是我在CLI查看我的本地DNS服务配置，即DNS客户机配置(/etc/resolv.conf)
<img src="/assets/img/1.d9958bfc.png" alt="clipboard.png"></p> <p>下面是我在设置中查看DNS服务配置
<img src="/assets/img/2.79ddedca.png" alt="clipboard.png"></p> <p>大家会问，这两个一样吗？只不过一个是在文件系统查看一个是在GUI上查看，两者没区别吧？嗯，是的没区别。</p> <p>实际上，修改本地的DNS解析规则，在Nginx上有三个地方，分别是</p> <blockquote><p>hosts文件(/etc/hosts) --&gt; 网卡配置文件(/etc/sysconfig/network-scripts/**)--&gt; DNS服务器地址配置文件(/etc/resolv.conf)</p></blockquote> <p>我们刚才修改的只是系统的DNS服务器地址配置文件，当然在内网的路由网址上也是对应的这个文件。前两个配置方式比较粗暴，在这里就不讲了，有伤大雅。</p> <p>分析一下配置文件中的字段(实际上还有很多，先说两个吧)：</p> <ol><li><p>Domain(Mac中网络-高级-搜索域) 提供一个基本的搜索域，<code>解析失败的域名会和这个基本的搜索域拼接</code>，再去做DNS解析，看我下面偷的这一句话，就明白它的作用了。<strong>例如，如果您指定搜索域为 apple.com，在您的网页浏览器中键入“store”将会前往 store.apple.com。或者，如果使用 campus.university.edu 作为搜索域，那么您可以在“访达”的“连接服务器”对话框中键入“server1”来连接到 server1.campus.university.edu。</strong></p></li> <li><p>Nameserver(Mac中网络-高级-DNS服务器)，也就是<code>本地的DNS服务器列表</code>，它的格式是IP地址，v4 v6 都可以，远端或本地地址都可以，甚至这个地址可以填写一个<code>内网IP</code>，然后我们就可以自定义处理DNS解析服务了。</p></li></ol> <p><code>nameserver</code>这个字段就太好玩了，通常家庭版的地址是<code>192.168.1.1</code>，也就是大多数路由器的IP地址，然后用户可以在自己的路由器设置页面配置DNS解析服务器的地址。如下</p> <p><img src="/assets/img/3.2610bce2.png" alt="clipboard.png"></p> <p>当然，你也可以不使用路由器来转发你的DNS解析，直接填写这个<code>根DNS服务器</code>地址，也就是图上面的222.*。</p> <p>作为程序员，突发奇想，我们还可以玩的更浪一些~~~，就比如：</p> <p>添加一个本地域名解析服务，也就是添加一个127.0.0.1在你的DNS配置文件中，注意一定要添加在第一行，别忘了Nameserver是有序的哦。</p> <p><img src="/assets/img/4.426c83db.png" alt="clipboard.png"></p> <p>然后在本地开一个<code>UDP</code>服务，监听<code>53</code>端口(53端口是Linux御赐的DNS服务端口)，你就会看到本地的DNS处理记录：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> dgram <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dgram'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> socket <span class="token operator">=</span> dgram<span class="token punctuation">.</span><span class="token function">createSocket</span><span class="token punctuation">(</span><span class="token string">'udp4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 服务端监听一个端口 数据到来时 可以读出信息</span>
<span class="token function">socket</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token string">'localhost'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//读取消息</span>
    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span>rinfo</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>下面这些<strong>乱七八糟</strong>的，就是DNS解析记录...</p> <p><img src="/assets/img/5.1a78f2bf.png" alt="clipboard.png"></p> <p>我们可以修改上面的代码来<code>自定义解析后的信息</code>，我不知道这个返回状态应该怎么设定，没事闲的同学可以去查查怎么可以伪造这个信息，听起来很刺激...
不过我觉得脚本化有些棘手，53端口受特殊保护，就连监听和查看它的占用情况都需要<code>提权</code>，上述代码linux上出<code>EACCES</code>错的可以加上sudo，win提权太麻烦不说了。</p> <p>说了一大堆没用的，回正题，现在开始我们<strong>假设本地DNS服务接受了一个软件的解析请求～～</strong></p> <p>并且上述的 hosts文件 --&gt; 网卡配置文件--&gt; DNS服务器地址配置文件，前两个不做任何处理的情况下。一个DNS解析请求将会按照以下顺序处理。</p> <ol><li><p>在DNS解析服务开始之前，系统会找到我们设定(一般电脑或路由层都会预设，我们上边也说了好几种方式设置了，可以是内网也可以是外网的根服务器地址)
的DNS服务器列表，在我这是两个，10.10.* and 10.120.*（统统为内网地址） 从第一个开始向这个DNS服务器发送域名解析请求。</p></li> <li><p>如果第一个处理失败，或者查询不到，就用第二个找。也就是 10.120.*。</p></li> <li><p>如果10.120.*也找不到(最后一个nameserver)，那么使用这个domain来处理了。</p></li></ol> <p><strong>本地DNS服务的任务就是接受计算机软件的DNS解析服务，去向根DNS服务器发送请求，获得最终的IP地址。</strong></p> <p>如果本地有 DNS resolver 的话，也是可以缓存你的DNS解析的，什么是Resover？就是咱们刚才建立在53端口的服务，它就是一个Resolver。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// 验证是否存在 resolver
sduo <span class="token function">lsof</span> -i:53
// or 查看 /etc/resolv.conf 
</code></pre></div><p>resolver 有可能缓存上一次DNS解析结果。如果碰到恶意的resolver，看谁不顺眼就可以筛选所有某站的主域名(比如竞争对手的...嘿嘿)
返回一个不存在的ip地址，然后这个域名在那台电脑上就查询不到啦，除非技术手动撤销这个resolver，否则卸载重装这个应用， 重启电脑，
统统不好使。</p> <p>所以，友情提醒：<code>尽量不要使用本地的DNS resolver。</code>，检测办法可以通过查看53端口是否被进程占用着。</p> <h2 id="远端dns服务器"><a href="#远端dns服务器" class="header-anchor">#</a> 远端DNS服务器</h2> <p>远端DNS服务器的作用是，接收到来自世界各地的主机(通过本地的DNS服务发出的)请求，然后分析域名返回对应的IP，看起来这是一个大而又沉重的活对吧？
其实对于 ICANN -- 世界域名管理机构，它并不需要做什么～～～，为什么呢？请继续看 😁。</p> <h3 id="根dns-root-dns"><a href="#根dns-root-dns" class="header-anchor">#</a> 根DNS(Root DNS)</h3> <p>根DNS服务商有很多，下图是目前世界范围内最大的根DNS服务商。</p> <p><img src="/assets/img/5.1.e340d91b.png" alt="clipboard.png"></p> <p>通常，电脑在出厂时，系统都会默认设置一个根DNS IP。</p> <p>以<code>ICANN</code>为例，它只是把域名分类，并通过这个类别下发给<code>顶级DNS服务机构</code>，分类的方式通过域名后缀，.com, .cn, .net 等等，
比如 <code>.cn</code> 域名主要是<code>中国互联网络信息中心（CNNIC）</code>托管，所以实际上它只需要存储这些<code>顶级DNS服务机构</code>的主机地址(IP)就可以。</p> <p>接着从上面的本地DNS服务开始说，它把解析请求发送给 20.20.* 服务器，这个服务器就是根DNS，所有DNS解析请求都经过它来<code>转发</code>，
根DNS服务器免费的没有几个，国内的114.114*比较快一点，国外的Google的8.8.8.8, 8.8.4.4(国内外的搜索引擎企业都可以做
DNS服务，他们有天然优势，因为爬取内容时本身就是一个个DNS解析，它们完全可以维护一套自己的域名解析系统，当然也有超出自己的范围外的域名，比如墙内外~~~，所以nameserver最好设置
多个)，都是普遍使用的。</p> <p>那么又一个问题，世界上这么多域名才这么几个服务器，而且每台电脑的DNS解析请求是非常频繁的，他们受得住吗？</p> <h3 id="顶级-dns-tld-dns"><a href="#顶级-dns-tld-dns" class="header-anchor">#</a> 顶级 DNS(TLD DNS)</h3> <p>首先，ROOT DNS 确实是接受所有的来自世界各地的请求(实际上也肯定不是一台物理机，会分发给好多台去处理请求，即单IP可对应多台机器，多台机器也可以使用一个IP)，
但它不负责处理这个解析，只负责<code>分类并返回顶级DNS服务器IP</code>。然后LocalDNS接收到这个<code>顶级DNS服务 IP</code>后，再去<code>迭代</code>查询。</p> <p><code>注意，以上的递归查询和迭代查询的区别，递归查询的是:我向A请求，A你必须得给我一个结果，不到黄河不死心。而迭代查询是，我向A请求， A有可能没有这个东西，它把B返回给你，让你和B问...</code></p> <p>另外，ROOT DNS 服务都做了防Ddos攻击的措施，不会轻易垮掉，这里再稍微说一点，早期DNS 服务使用UDP也是有这个原因的，第一是为了客户端快(一来一回就结束)，自己的服务器压力也会小，
但是直到现在，也在慢慢的开始普及TCP，因为假如有丢包的情况，没有重试机制(通常这种情况也不会导致客户机的访问资源失败，因为大部分主机和运营商都提供第二层的DNS服务查询)，但是
你懂的，总会有人喷。</p> <p>这个阶段，如果你本地有DNS缓存服务的话，它会记住某个域名与它所属的<code>顶级DNS的IP地址</code>，下次请求直接去同样类别的顶级DNS服务地址，而不用经过ROOT DNS处理。</p> <p><code>顶级DNS</code>接到Local DNS请求之后，查询此域名之后发现它已经交给<code>专属DNS服务器</code>(也就是你购买域名时设置的域名解析服务器)处理</p> <p>所以呢，<code>顶级DNS的作用就是帮助Root DNS减少很多查库和处理请求的时间，其次也做了一个分区的管理</code></p> <h3 id="专属-自定义dns服务器"><a href="#专属-自定义dns服务器" class="header-anchor">#</a> 专属/自定义DNS服务器</h3> <p>自定义DNS属于我们域名下的专属DNS服务器，我们可以使用自己的DNS服务器配置到你的域名上(<code>申请DNS服务器需要到国内注册局申请办理</code>)。
实际上，配置二级，三级等多级的域名都是靠它来的，它更接近与<code>服务级</code>, 而上面的顶级DNS属于查找<code>主域</code>(企业级)，ROOT DNS 属于<code>区域级别</code>(国际域名分区管理)。</p> <p>如果是本地内网搭建，就没那么多规则，可以使用<code>Berkeley Internet Name Domain</code>。(通常，企业在内网会使用此类工具搭建一个DNS服务，把每个后端开发者的名字对应到
它的主机上，这样就能很好的和其他同事调试接口)</p> <p>在阿里云买过域名的都知道，购买完毕后是可以绑定上域名解析的，它默认使用的是万网的DNS服务器(它就是阿里云提供的默认的自定义DNS服务器)，如果你有自己的DNS服务器的话，
可以在域名管理中配置。</p> <p>最后来张图通一通。以我司客户端为例：</p> <ol start="2"><li><p><code>LocalDNS</code> 接收到一个客户端发送的域名解析请求，看看本地有没有上次缓存的现成的<code>hetao101域下的DNS服务器</code>。如果没有，取出第一个nameserver(也就是根DNS服务器)，进行<code>迭代查询</code>。如果有，直接跳到第5步。</p></li> <li><p><code>根DNS</code>解析我们的<code>www.hetao101.com</code>地址属于 .com 区，然后把 .com 区的顶级DNS服务器的IP返回给<code>Local DNS</code>处理。</p></li> <li><p><code>Local DNS</code>收到<code>顶级DNS</code>的IP，然后再次发送<code>迭代查询</code>向顶级DNS服务。</p></li> <li><p><code>顶级DNS</code>查询数据库，找到<code>hetao101</code>这个<strong>主</strong>域名对应的<code>专属DNS服务</code>地址，然后把地址返回给<code>Local DNS</code>。</p></li> <li><p>Local DNS发送请求到<code>专属DNS服务器</code>，通过查看<code>www</code>，然后返回给这个二级域名对应的IP地址。</p></li> <li><p>Local DNS拿到IP后非常鸡冻(来回串了这么多服务器终于拿到了)，赶紧握握手亲热亲热，然后开始了建立网络通道(e.g TCP)。</p></li></ol> <p><img src="/assets/img/6.c4d2cb7e.png" alt="clipboard.png"></p> <p>热情提醒：在使用NODE的 DNS.lookup 或者 resolve 查询时</p> <h2 id="cdn服务器"><a href="#cdn服务器" class="header-anchor">#</a> CDN服务器</h2> <p>网络就是数个灯泡中间的导线，电线长了，电流抵达的速度也就慢了，灯泡亮的速度就慢了。。。</p> <p>所以，我们在导线的中间加上了一个<code>继电器式</code>的资源服务器。也就是CDN服务器。保证资源快速响应给局部用户。</p> <p>CDN服务器通常包括一个源站和子节点(其他区域的资源服务器)，上传文件到CDN服务器首先到达源站，然后源站分发给子节点。
然后当客户端请求时候通过它们自己的DNS服务器解析请求IP(地理位置因素)，然后返回不同的子节点地址。</p> <p>如果源站的资源被替换或者删除，子节点也会与它同步。</p> <p>简单的打了个比方，具体使用场景及原理，可以自行Google，不多说了废话了，下面简单说下我遇到那个问题。</p> <blockquote><p>最近遇到一个小问题，在更新资源文件后，在某些用户的请求中会莫名其妙的出现<code>302</code>然后重定向地址是404，在这里分享下导致这种问题的原因。</p></blockquote> <p>上下文：这个请求是阿里云OSS的，客户是河北沧州移动运营商，重定向后的IP地址后面添加相比源路径多了很多层路径，位置是河北石家庄的移动网络。</p> <p>我一开始的分析是，本地DNS服务或运营商缓存了DNS解析(阿里云DNS解析后的IP是可以根据客户端的区域分配就近节点的，所以应该被分到了石家庄节点)，然后当我更新这个文件时，由于ISP缓存没有到期(假定是ISP，还有可能是本地DNS Resolver)，然后更新文件后，继续请求上次的解析后的地址(地址上是有文件的hash的)，导致资源404(hash值被更新)。</p> <p>仔细想一下是不对的，首先DNS解析只会返回域名区段，不会给你添加路径。第二如果是阿里云子节点在上传文件到源站的时候，就会同步到各个子节点，所以不会出现404的情况。</p> <p>那么，如果这个重定向的IP地址不是阿里云的，难道是运营商自己的，它把响应文件缓存起来，然后放到自己的缓存服务器，如果请求在缓存期内就从运营商自己的缓存服务器里取？我估计这个也不可能，因为，条件是<code>每次在阿里云OSS上更新文件时，才会出现这个问题</code>，所以，有两种可能：</p> <ol><li>因为资源是和阿里云源站同步的，所以，可判定这个地址并不是运营商的地址(是阿里云的)。</li> <li>DNS劫持，劫持和缓存一样，区别是前者以攻击为目的，给你返回期望之外的IP，后者是给你目标IP。</li></ol> <p>而当我分析上面说的302返回的重定向地址时，我不太确信这是一个DNS劫持，因为这地址看起来<code>太正经</code>，如：</p> <p><code>http://111.**.135.171/files/317200004364C385/***.oss-cn-beijing.aliyuncs.com/***.zip</code></p> <p>第一段 IP，后面的的路径非常有规律，files下面的file hash，然后是源站的下载地址。</p> <p>这么正经的IP不可能是被劫持吧，那么再说回去，如果302是运营商的DNS缓存导致的，302后的地址也就是这个地址，它是怎么来的呢？？</p> <p>我分别测试了山东和杭州的网络，DNS解析<code>***.oss-cn-beijing.aliyuncs.com</code>这个源下载地址并没有返回动态子节点IP，实际上还是beijing区的源站IP，这说明DNS解析是没有动态返回节点的。</p> <p>不是运营商也不是阿里云，究竟是什么？</p> <p>愁了我一个星期，在阿里云栖社区问了此问题，也没有收到特别准确的回答，因为用户的问题已经使用其他方式修复，所以没有办法再次确定问题，目前只能认为是</p> <ol><li><p>DNS劫持</p></li> <li><p>运营商的DNS缓存,DNS缓存阿里云的OSS地址解析后的IP，可是并不起作用，因为阿里的OSS使用的是虚拟站点，用DNS后的ip+路径 和 地址+路径是不一样的, 。
<code>DNS解析后的IP是不能直接替换域名的</code>，DNS是为了取IP，而IP是在建立<code>连接层</code>之根基，但是连接层上还有写一层，一些服务器上的httpserver，比如Apach或者Nginx会提供一个叫做<code>虚拟站点</code>的功能，简单来说根据你请求的host(域名)来分拨出不同的文件路径，也就是说一台服务器是可以享有多个域名的。当然不仅是分拨路径，中间还可以去向其他服务请求(有点像proxy，但是根据域名来判断的proxy分拨)，想了解更多请搜索 <code>虚拟站点</code>。</p></li></ol> <p>不知道大家有什么可以提出的意见没有～～</p></div></div></div> <div class="el-card my-4 is-always-shadow"><div class="el-card__header"><div class="clearfix"><h5 class="m-0">Read More</h5></div></div><div class="el-card__body"> <div class="container featured-posts my-4"><div class="el-carousel el-carousel--horizontal el-carousel--card"><div class="el-carousel__container" style="height:300px;"><button type="button" class="el-carousel__arrow el-carousel__arrow--left" style="display:none;"><i class="el-icon-arrow-left"></i></button><button type="button" class="el-carousel__arrow el-carousel__arrow--right" style="display:none;"><i class="el-icon-arrow-right"></i></button><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2015/01/20/13/13/ipad-605440_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">破解google语音合成接口</h4> <a href="/2020/05/15/%E7%A0%B4%E8%A7%A3google%E8%AF%AD%E9%9F%B3%E5%90%88%E6%88%90%E6%8E%A5%E5%8F%A3/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2015/01/20/13/13/ipad-605440_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">破解google语音合成接口</h4> <a href="/2020/05/15/action-at-a-distance/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/02/07/14/49/glacier-4827387_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">《专业和业余的区别》于吴军老师的第280封硅谷来信</h4> <a href="/2019/10/14/%E3%80%8A%E4%B8%93%E4%B8%9A%E5%92%8C%E4%B8%9A%E4%BD%99%E7%9A%84%E5%8C%BA%E5%88%AB%E3%80%8B%E4%BA%8E%E5%90%B4%E5%86%9B%E8%80%81%E5%B8%88%E7%9A%84%E7%AC%AC280%E5%B0%81%E7%A1%85%E8%B0%B7%E6%9D%A5%E4%BF%A1/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/16/10/27/spring-4936511_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">“痛并快乐着”于白岩松先生的《白说》</h4> <a href="/2019/10/14/%E2%80%9C%E7%97%9B%E5%B9%B6%E5%BF%AB%E4%B9%90%E7%9D%80%E2%80%9D%E4%BA%8E%E7%99%BD%E5%B2%A9%E6%9D%BE%E5%85%88%E7%94%9F%E7%9A%84%E3%80%8A%E7%99%BD%E8%AF%B4%E3%80%8B/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/22/11/23/landscape-4956790_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">古希腊神话</h4> <a href="/2019/10/14/%E5%8F%A4%E5%B8%8C%E8%85%8A%E7%A5%9E%E8%AF%9D/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/21/19/27/sea-4955005_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">《成功并不难，在于少犯错误》于 吴军老师的第187封硅谷来信</h4> <a href="/2019/10/14/%E3%80%8A%E6%88%90%E5%8A%9F%E5%B9%B6%E4%B8%8D%E9%9A%BE%EF%BC%8C%E5%9C%A8%E4%BA%8E%E5%B0%91%E7%8A%AF%E9%94%99%E8%AF%AF%E3%80%8B%E4%BA%8E-%E5%90%B4%E5%86%9B%E8%80%81%E5%B8%88%E7%9A%84%E7%AC%AC187%E5%B0%81%E7%A1%85%E8%B0%B7%E6%9D%A5%E4%BF%A1/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/06/08/00/office-4906312_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">属于你的那份成长曲线图</h4> <a href="/2019/10/14/%E5%B1%9E%E4%BA%8E%E4%BD%A0%E7%9A%84%E9%82%A3%E4%BB%BD%E6%88%90%E9%95%BF%E6%9B%B2%E7%BA%BF%E5%9B%BE/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/25/11/43/book-4966982_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">知识复利之路于李笑来老师的《通往财富自由之路》解读</h4> <a href="/2019/10/14/%E7%9F%A5%E8%AF%86%E5%A4%8D%E5%88%A9%E4%B9%8B%E8%B7%AF%E4%BA%8E%E6%9D%8E%E7%AC%91%E6%9D%A5%E8%80%81%E5%B8%88%E7%9A%84%E3%80%8A%E9%80%9A%E5%BE%80%E8%B4%A2%E5%AF%8C%E8%87%AA%E7%94%B1%E4%B9%8B%E8%B7%AF%E3%80%8B%E8%A7%A3%E8%AF%BB/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2015/01/08/18/26/write-593333_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">认真做事，持续改变</h4> <a href="/2020/04/07/%E8%AE%A4%E7%9C%9F%E5%81%9A%E4%BA%8B%EF%BC%8C%E6%8C%81%E7%BB%AD%E6%94%B9%E5%8F%98/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/05/30/16/48/forest-5239560_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">Promise的十个使用禁令</h4> <a href="/2020/06/03/promise%E7%9A%84%E5%8D%81%E4%B8%AA%E4%BD%BF%E7%94%A8%E7%A6%81%E4%BB%A4/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/04/17/14/16/landscape-5055384_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">从格式和规则上统一编码风格</h4> <a href="/2020/04/23/%E4%BC%98%E8%B4%A8%E4%BB%A3%E7%A0%81%E4%BB%8E%E6%A0%BC%E5%BC%8F%E5%92%8C%E8%A7%84%E5%88%99%E5%BC%80%E5%A7%8B/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/05/21/11/03/lily-of-the-valley-5200245__340.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">node各个环境变量详解</h4> <a href="/2020/05/25/node%E5%90%84%E4%B8%AA%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AF%A6%E8%A7%A3/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/05/28/03/38/canyon-5229681_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">nodeJS面试问题</h4> <a href="/2020/06/04/nodejs%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E6%95%B4%E7%90%86/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/05/29/05/47/barley-5233734__340.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">什么时候使用 peerDependencies?</h4> <a href="/2020/06/03/peerdependencies/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://i.picsum.photos/id/79/800/600.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">The perform of python's unicode problem on different computer</h4> <a href="/2019/10/14/charcode-in-different-platform/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/30/17/15/funes-4984899_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">关于webRTC各个名词介绍</h4> <a href="/2020/04/04/basic-web-rtc-knowledge/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/27/15/12/books-4973837_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">关于编码的总结</h4> <a href="/2020/05/01/conclution-of-charcode/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2015/01/20/13/13/ipad-605440_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">关于遇到的一个DNS查询问题</h4> <a href="/2020/06/19/%E5%85%B3%E4%BA%8E%E6%88%91%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%B8%AAdns%E9%97%AE%E9%A2%98/" class="el-button el-button--primary router-link-exact-active router-link-active">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/03/20/31/laguna-4899802_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">深入贯彻闭包思想，全面理解JS闭包形成过程</h4> <a href="/2017/11/28/the-closure-in-javascript/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div><div class="el-carousel__item bg-light bg-cover border-10 el-carousel__item--card" style="transform:translateX(0px) scale(1);ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);display:none;background-image:url(https://cdn.pixabay.com/photo/2020/03/27/15/12/books-4973837_960_720.jpg);background-blend-mode:multiply;background-size:cover;"><div class="el-carousel__mask"></div><div class="carousel-card-content d-flex justify-content-center align-items-center flex-column h-100"><h4 class="story-title text-center h4 featured-post-title mb-3">Computer-Science-University</h4> <a href="/2023/06/05/computer-science-university/" class="el-button el-button--primary">Read this Post <i class="el-icon-arrow-right"></i></a></div></div></div><ul class="el-carousel__indicators el-carousel__indicators--horizontal el-carousel__indicators--outside"></ul></div></div></div></div> <div class="el-card is-always-shadow"><div class="el-card__header"><div class="clearfix"><h5 class="m-0">Tags</h5></div></div><div class="el-card__body"> <div><a href="/tag/network" class="el-button el-button--small text-decoration-none d-inline-block">#network</a></div></div></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#本地-local-resolver" title="本地(Local Resolver)">本地(Local Resolver)</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#远端dns服务器" title="远端DNS服务器">远端DNS服务器</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#根dns-root-dns" title="根DNS(Root DNS)">根DNS(Root DNS)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#顶级-dns-tld-dns" title="顶级 DNS(TLD DNS)">顶级 DNS(TLD DNS)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#专属-自定义dns服务器" title="专属/自定义DNS服务器">专属/自定义DNS服务器</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#cdn服务器" title="CDN服务器">CDN服务器</a></div></div> <!----></main></div> <footer class="footer" data-v-5eccf6f7 data-v-7213d69c><div class="footer-left-wrap" data-v-5eccf6f7><ul class="contact" data-v-5eccf6f7><li class="contact-item" data-v-5eccf6f7><a href="https://github.com/TongDaDa" target="_blank" rel="noopener noreferrer" class="external" data-v-5eccf6f7><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-5eccf6f7><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-5eccf6f7></path></svg>
          
        </a></li><li class="contact-item" data-v-5eccf6f7><a href="https://weibo.com/u/5736764406?is_all=1" target="_blank" rel="noopener noreferrer" class="external" data-v-5eccf6f7><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin" data-v-5eccf6f7><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" data-v-5eccf6f7></path><rect x="2" y="9" width="4" height="12" data-v-5eccf6f7></rect><circle cx="4" cy="4" r="2" data-v-5eccf6f7></circle></svg>
          
        </a></li><li class="contact-item" data-v-5eccf6f7><a href="https://twitter.com/Console90Liu" target="_blank" rel="noopener noreferrer" class="external" data-v-5eccf6f7><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-5eccf6f7><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-5eccf6f7></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-5eccf6f7><ul class="copyright" data-v-5eccf6f7><li class="copyright-item" data-v-5eccf6f7><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="external" data-v-5eccf6f7>Privacy Policy</a></li><li class="copyright-item" data-v-5eccf6f7><a href="/2020/06/19/%E5%85%B3%E4%BA%8E%E6%88%91%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%B8%AAdns%E9%97%AE%E9%A2%98/.html" data-v-5eccf6f7>MIT Licensed | Copyright © 2018-present Vue.js</a></li></ul></div></footer></section><div class="global-ui"><div class="reading-progress top" data-v-56679cca><div class="progress" data-v-56679cca></div></div><!----></div></div>
    <script src="/assets/js/app.0c8f8685.js" defer></script><script src="/assets/js/4.a235b7fe.js" defer></script><script src="/assets/js/7.428d303c.js" defer></script><script src="/assets/js/9.d8389ee9.js" defer></script>
  </body>
</html>
